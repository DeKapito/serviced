<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>serviced-storage</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <link rel="schema.DC" href="http://purl.org/dc/terms/">
      <meta name="DC.Type" content="reference">
      
      <meta name="DC.Title" content="serviced-storage">
      
      <meta name="abstract" content="The serviced-storage command manages Control Center storage.">
      
      <meta name="description" content="The serviced-storage command manages Control Center storage.">
      
      <meta name="DC.Relation" scheme="URI" content="cli.html">
      
      <meta name="prodname" content="Control Center">
      
      <meta name="prodname" content="Control Center">
      
      <meta name="version" content="1">
      
      <meta name="version" content="1">
      
      <meta name="release" content="3">
      
      <meta name="release" content="3">
      
      <meta name="modification" content="0">
      
      <meta name="modification" content="0">
      
      <meta name="DC.Publisher" content="Zenoss, Inc.">
      
      <meta name="DC.Format" content="XHTML">
      
      <meta name="DC.Identifier" content="referenceid">
      <script type="text/javascript">var d4p = {"relativePath":"..\/..\/","dev":false,"debug":false,"draft":false,"nextTopicHref":"feature\/vars\/file.html","previousTopicHref":"feature\/cli\/serviced-snapshot.html","root":false,"map":{"chunked":false},"search":{"minlength":2},"l":{"searchPageHeading":"Search Results","close":"Close"}}</script>
      <link rel="stylesheet" type="text/css" media="screen, projection" href="../../themes/html5-zenoss/css/style.css">
      
      <link rel="stylesheet" type="text/css" media="screen, projection, print" src="http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700">
      <script rel="stylesheet" type="text/css" media="screen, projection, print" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="../../themes/html5-zenoss/js/script.js"></script>
      </head>
   <body class="en-us html5-zenoss centered navigation-default">
      <ul id="page-links" class="hidden sr-only">
         <li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li>
         <li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li>
         <li><a id="skip-to-footer" href="#footer">Skip to footer</a></li>
      </ul>
      <header id="site-head" class="header header--fixed">
         <nav id="topNav" class="navbar navbar-inverse navbar-static-top" role="navigation">
            <div class="container">
               <div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="#">  Control Center Reference Guide  </a></div>
               <form id="search" class="navbar-form navbar-right hidden-xs" role="search">
                  <div class="form-group"><input id="search-text" type="text" class="form-control" placeholder="Search"></div>
               </form>
               <ul class="nav navbar-nav navbar-right hidden-xs">
                  <li id="dropdown-share" class="dropdown share"><a href="#" class="dropdown-toggle  btn-lg btn" data-toggle="dropdown" role="button" aria-expanded="false"><span class="fa  fa-share-alt"></span><span class="sr-only">Share</span><span class="caret"></span></a><ul class="dropdown-menu" role="menu">
                        <li><a id="LinkFacebook" href="https://www.facebook.com/"><span class="fa fa-facebook"></span> Facebook</a></li>
                        <li><a id="LinkLinkedin" href="https://www.linkedin.com/"><span class="fa fa-linkedin"></span> LinkedIn</a></li>
                        <li><a id="LinkTwitter" href="https://twitter.com/?lang=en"><span class="fa fa-twitter"></span> Tweeter</a></li>
                     </ul>
                  </li>
               </ul>
            </div>
         </nav>
         <div id="msg-version"></div>
      </header>
      <div class="container">
         <div class="row">
            <div class="col-xs-12 col-md-21">
               <ol class="breadcrumb">
                  <li><a class="breadcrumb" href="../../feature/cli/cli.html" title="Command-line interface reference">Command-line interface reference</a></li>
                  
                  <li>serviced-storage</li>
               </ol>
            </div>
         </div>
         <div class="row">
            <div class="col-xs-6 col-md-4 hidden-xs">
               <nav id="side-navigation" class="bs-docs-sidebar hidden-print hidden-xs">
                  <ul class="nav bs-docs-sidenav">
                     <li class=" no-child "><a href="../../book/help/front/about.html">About this guide</a></li>
                     <li class=" collapsible  collapsed"><a href="../../feature/manage/admin.html"><span class="enumeration enumeration0">Chapter 1. </span>Administration reference</a><ul class="nav">
                           <li class=" no-child "><a href="../../feature/manage/resize.html">Adding space to a tenant device</a></li>
                           <li class=" collapsible  collapsed"><a href="../../feature/backup/overview.html">Backing up and restoring</a><ul class="nav">
                                 <li class=" no-child "><a href="../../feature/backup/best-practice.html">Best practices for backup and restore</a></li>
                                 <li class=" no-child "><a href="../../feature/backup/backup.html">Backing up using the browser interface</a></li>
                                 <li class=" collapsible  collapsed"><a href="../../feature/backup/cli.html">Backing up using the CLI</a><ul class="nav">
                                       <li class=" no-child "><a href="../../feature/backup/cli-all.html">Backing up the entire system</a></li>
                                       <li class=" no-child "><a href="../../feature/backup/cli-exclude-one.html">Exclude one tenant volume from the backup</a></li>
                                       <li class=" no-child "><a href="../../feature/backup/cli-exclude-multiple.html">Exclude multiple tenant volumes from the backup</a></li>
                                    </ul>
                                 </li>
                                 <li class=" no-child "><a href="../../feature/backup/restore.html">Restoring from a backup</a></li>
                              </ul>
                           </li>
                           <li class=" collapsible  collapsed"><a href="../../feature/manage/snapshot-rollback.html">Snapshot and rollback</a><ul class="nav">
                                 <li class=" no-child "><a href="../../feature/manage/snapshot.html">Creating a snapshot</a></li>
                                 <li class=" no-child "><a href="../../feature/manage/rollback.html">Rolling back to a snapshot</a></li>
                              </ul>
                           </li>
                           <li class=" collapsible  collapsed"><a href="../../feature/manage/intro-stop-start.html">Stopping and starting Control Center for maintenance</a><ul class="nav">
                                 <li class=" no-child "><a href="../../feature/manage/stop-1.html">Stopping Control Center (single-host deployment)</a></li>
                                 <li class=" no-child "><a href="../../feature/manage/start-1.html">Starting Control Center (single-host deployment)</a></li>
                                 <li class=" collapsible  collapsed"><a href="../../feature/manage/stop-n.html">Stopping Control Center (multi-host deployment)</a><ul class="nav">
                                       <li class=" no-child "><a href="../../feature/manage/stop-n-master.html">Stopping a master host (multi-host deployment)</a></li>
                                       <li class=" no-child "><a href="../../feature/manage/stop-n-delegate.html">Stopping a delegate host (multi-host deployment)</a></li>
                                    </ul>
                                 </li>
                                 <li class=" no-child "><a href="../../feature/manage/start-n.html">Starting Control Center (multi-host deployment)</a></li>
                              </ul>
                           </li>
                           <li class=" collapsible  collapsed"><a href="../../feature/manage/emer-sdown-overview.html">Emergency shutdown of services</a><ul class="nav">
                                 <li class=" no-child "><a href="../../feature/manage/clear-emerg.html">Resetting emergency shutdown flags</a></li>
                              </ul>
                           </li>
                        </ul>
                     </li>
                     <li class=" collapsible  active"><a href="../../feature/cli/cli.html"><span class="enumeration enumeration0">Chapter 2. </span>Command-line interface reference</a><ul class="nav">
                           <li class=" no-child "><a href="../../feature/cli/invoking-serviced.html">Invoking serviced</a></li>
                           <li class=" no-child "><a href="../../feature/cli/serviced.html">serviced</a></li>
                           <li class=" no-child "><a href="../../feature/cli/serviced-backup.html">serviced backup</a></li>
                           <li class=" no-child "><a href="../../feature/cli/serviced-docker.html">serviced docker</a></li>
                           <li class=" no-child "><a href="../../feature/cli/serviced-host.html">serviced host</a></li>
                           <li class=" no-child "><a href="../../feature/cli/serviced-key.html">serviced key</a></li>
                           <li class=" no-child "><a href="../../feature/cli/serviced-log-export.html">serviced log export</a></li>
                           <li class=" no-child "><a href="../../feature/cli/serviced-pool.html">serviced pool</a></li>
                           <li class=" no-child "><a href="../../feature/cli/serviced-restore.html">serviced restore</a></li>
                           <li class=" no-child "><a href="../../feature/cli/script.html">serviced script</a></li>
                           <li class=" no-child "><a href="../../feature/cli/serviced-service.html">serviced service</a></li>
                           <li class=" no-child "><a href="../../feature/cli/serviced-snapshot.html">serviced snapshot</a></li>
                           <li class=" no-child  active"><a class="selected" href="../../feature/cli/serviced-storage.html">serviced-storage</a></li>
                           <li class=" no-child "><a href="../../feature/vars/file.html">Control Center configuration file</a></li>
                        </ul>
                     </li>
                     <li class=" collapsible  collapsed"><a href="#">Glossary</a><ul class="nav">
                           <li class=" no-child "><a href="../../shared/glossary/cc-application.html">application</a></li>
                           <li class=" no-child "><a href="../../shared/glossary/cc-cluster.html">cluster</a></li>
                           <li class=" no-child "><a href="../../shared/glossary/cc-delegate-host.html">delegate host</a></li>
                           <li class=" no-child "><a href="../../shared/glossary/cc-master-host.html">master host</a></li>
                           <li class=" no-child "><a href="../../shared/glossary/cc-resource-pool.html">resource pool</a></li>
                           <li class=" no-child "><a href="../../shared/glossary/cc-service.html">service</a></li>
                           <li class=" no-child "><a href="../../shared/glossary/service-definition.html">service definition</a></li>
                           <li class=" no-child "><a href="../../shared/glossary/service-template.html">service template</a></li>
                           <li class=" no-child "><a href="../../shared/glossary/cc-serviced.html">serviced</a></li>
                           <li class=" no-child "><a href="../../shared/glossary/cc-tenant.html">tenant</a></li>
                        </ul>
                     </li>
                  </ul>
               </nav>
            </div>
            <div class="col-xs-12 col-md-8">
               <div id="page" class="starter-template">
                  <article>
                     <div class="page reference  - topic-topic       reference-reference " id="referenceid">
                        
                        <h1 class="title topictitle1">serviced-storage</h1>
                        <div class="body refbody">
                           <p class="shortdesc">The <span class="keyword cmdname">serviced-storage</span> command manages <span class="ph">Control Center</span>
                              storage.
                           </p>
                           
                           
                           <div class="section"><a name="referenceid-d15808e44" id="referenceid-d15808e44" class="anchor"></a>
                              
                              <p class="p">Use this command to create LVM thin pools for Docker Engine and <span class="ph">Control Center</span>.
                              </p>
                              
                              
                           </div>
                           
                           
                           <div class="section"><a name="referenceid-d15808e53" id="referenceid-d15808e53" class="anchor"></a>
                              
                              <h2 class="title sectiontitle">USAGE</h2>
                              <pre class="pre codeblock">serviced-storage  [-h|--help] [-o <var class="keyword varname">DeviceMapperOption</var>=<var class="keyword varname">Value</var>] \
  [-v] Command [<var class="keyword varname">CommandOptions</var>]</pre>
                              
                              </div>
                           
                           
                           <div class="section"><a name="referenceid-d15808e71" id="referenceid-d15808e71" class="anchor"></a>
                              
                              <h2 class="title sectiontitle">GLOBAL OPTIONS</h2>
                              
                              <dl class="dl">
                                 
                                 
                                 <dt class="dt dlterm">--help, -h</dt>
                                 
                                 
                                 <dd class="dd">Shows the help information.</dd>
                                 
                                 
                                 
                                 
                                 <dt class="dt dlterm">-o <var class="keyword varname">DeviceMapperOption</var>=<var class="keyword varname">Value</var></dt>
                                 
                                 
                                 <dd class="dd">A device mapper option. Applies only to device mapper drivers.</dd>
                                 
                                 
                                 
                                 
                                 <dt class="dt dlterm">-v</dt>
                                 
                                 
                                 <dd class="dd">Displays verbose logging.</dd>
                                 
                                 
                                 
                              </dl>
                              
                              
                           </div>
                           
                           
                           <div class="section"><a name="referenceid-d15808e112" id="referenceid-d15808e112" class="anchor"></a>
                              
                              <h2 class="title sectiontitle">COMMANDS</h2>
                              
                              <dl class="dl">
                                 
                                 
                                 <dt class="dt dlterm">check</dt>
                                 
                                 
                                 <dd class="dd">Check for orphaned devices.</dd>
                                 
                                 
                                 
                                 
                                 <dt class="dt dlterm">create</dt>
                                 
                                 
                                 <dd class="dd">Create a volume on a driver.</dd>
                                 
                                 
                                 
                                 
                                 <dt class="dt dlterm">create-thin-pool</dt>
                                 
                                 
                                 <dd class="dd">Create an LVM thin pool.</dd>
                                 
                                 
                                 
                                 
                                 <dt class="dt dlterm">disable</dt>
                                 
                                 
                                 <dd class="dd">Disable a driver.</dd>
                                 
                                 
                                 
                                 
                                 <dt class="dt dlterm">init</dt>
                                 
                                 
                                 <dd class="dd">Initialize a driver.</dd>
                                 
                                 
                                 
                                 
                                 <dt class="dt dlterm">list</dt>
                                 
                                 
                                 <dd class="dd">Print volumes on a driver.</dd>
                                 
                                 
                                 
                                 
                                 <dt class="dt dlterm">mount</dt>
                                 
                                 
                                 <dd class="dd">Mount an existing volume from a driver.</dd>
                                 
                                 
                                 
                                 
                                 <dt class="dt dlterm">remove</dt>
                                 
                                 
                                 <dd class="dd">Remove an existing volume from a driver.</dd>
                                 
                                 
                                 
                                 
                                 <dt class="dt dlterm">resize</dt>
                                 
                                 
                                 <dd class="dd">Resize an existing volume.</dd>
                                 
                                 
                                 
                                 
                                 <dt class="dt dlterm">set</dt>
                                 
                                 
                                 <dd class="dd">Set the default driver.</dd>
                                 
                                 
                                 
                                 
                                 <dt class="dt dlterm">status</dt>
                                 
                                 
                                 <dd class="dd">Print the driver status</dd>
                                 
                                 
                                 
                                 
                                 <dt class="dt dlterm">sync</dt>
                                 
                                 
                                 <dd class="dd">Sync data from a volume to another volume.</dd>
                                 
                                 
                                 
                                 
                                 <dt class="dt dlterm">unset</dt>
                                 
                                 
                                 <dd class="dd">Unset the default driver.</dd>
                                 
                                 
                                 
                                 
                                 <dt class="dt dlterm">version</dt>
                                 
                                 
                                 <dd class="dd">Print the version and exit.</dd>
                                 
                                 
                                 
                              </dl>
                              
                              
                           </div>
                           
                           
                           <div class="section"><a name="referenceid-d15808e249" id="referenceid-d15808e249" class="anchor"></a>
                              
                              <h2 class="title sectiontitle">serviced-storage check</h2>
                              
                              <p class="p">The <samp class="ph codeph">serviced-storage check</samp> command searches for orphaned snapshot devices
                                 in the <span class="keyword cmdname">serviced</span> application data thin pool and removes them, if
                                 requested. This command requires the path of <span class="keyword cmdname">serviced</span> tenant volumes,
                                 which is determined by the <var class="keyword varname">SERVICED_VOLUMES_PATH</var> variable in
                                 <span class="ph filepath">/etc/default/serviced</span>. The default path is
                                 <span class="ph filepath">/opt/serviced/var/volumes</span>.
                              </p>
                              
                              
                              <p class="p">Syntax:</p>
                              
                              <pre class="pre codeblock">serviced-storage [<var class="keyword varname">GlobalOptions</var>] check [-c|--clean] <var class="keyword varname">Path</var></pre>
                              
                              <p class="p">Command options:</p>
                              
                              
                              <dl class="dl">
                                 
                                 
                                 <dt class="dt dlterm">[-c|--clean]</dt>
                                 
                                 
                                 <dd class="dd">Remove orphaned snapshot devices.</dd>
                                 
                                 
                                 
                              </dl>
                              
                              
                           </div>
                           
                           
                           <div class="section"><a name="referenceid-d15808e305" id="referenceid-d15808e305" class="anchor"></a>
                              
                              <h2 class="title sectiontitle">serviced-storage create-thin-pool</h2>
                              
                              <p class="p">The <samp class="ph codeph">serviced-storage create-thin-pool</samp> command creates an LVM thin pool
                                 either for Docker data or for <span class="ph">Control Center</span> application data. When devices are
                                 specified, the command creates an LVM volume group.
                              </p>
                              
                              
                              <p class="p">Syntax:</p>
                              
                              <pre class="pre codeblock">serviced-storage [<var class="keyword varname">GlobalOptions</var>] create-thin-pool \
  [-s|--size]=[<var class="keyword varname">Value</var>][G|%] [docker|serviced] \
  [<var class="keyword varname">DevicePath</var> [<var class="keyword varname">DevicePath</var>...]|<var class="keyword varname">VolumeGroupName</var>]</pre>
                              
                              <p class="p">Command options:</p>
                              
                              
                              <dl class="dl">
                                 
                                 
                                 <dt class="dt dlterm">[-s|--size]=[<var class="keyword varname">Value</var>][G|%]
                                 </dt>
                                 
                                 
                                 <dd class="dd">The size of the thin pool to create. The size can be a fixed value (in gigabytes) or a
                                    relative value (a percentage) of the available storage. When this option is not used,
                                    the thin pool size defaults to 90% of the specified storage resource.
                                 </dd>
                                 
                                 
                                 
                              </dl>
                              
                              
                           </div>
                           
                           
                           <div class="section"><a name="referenceid-d15808e360" id="referenceid-d15808e360" class="anchor"></a>
                              
                              <h2 class="title sectiontitle">serviced-storage resize</h2>
                              
                              <p class="p">The <samp class="ph codeph">serviced-storage resize</samp> command increases the size of a
                                 <span class="keyword cmdname">serviced</span> tenant device in its LVM thin pool. Like LVM thin pools, the
                                 size of a <span class="keyword cmdname">serviced</span> tenant device can never decrease.
                              </p>
                              
                              
                              <p class="p">Syntax:</p>
                              
                              <pre class="pre codeblock">serviced-storage [<var class="keyword varname">GlobalOptions</var>] resize \
  [-d|--driver]=<var class="keyword varname">Value</var> <var class="keyword varname">TenantID</var> <var class="keyword varname">NewSize</var></pre>
                              
                              <p class="p">Command options:</p>
                              
                              
                              <dl class="dl">
                                 
                                 
                                 <dt class="dt dlterm">[-d|--driver]=<var class="keyword varname">Value</var></dt>
                                 
                                 
                                 <dd class="dd">The path of the tenant volume.</dd>
                                 
                                 
                                 
                              </dl>
                              
                              
                           </div>
                           
                           
                           <div class="section"><a name="referenceid-d15808e413" id="referenceid-d15808e413" class="anchor"></a>
                              
                              <h2 class="title sectiontitle">EXAMPLES</h2>
                              
                              <p class="p">Create an LVM volume group named <samp class="ph codeph">zenoss</samp> and use it for both thin
                                 pools:
                              </p>
                              
                              <pre class="pre codeblock">vgcreate zenoss /dev/sdb /dev/sdc
serviced-storage create-thin-pool --size=50G docker zenoss
serviced-storage create-thin-pool --size=50% serviced zenoss</pre>
                              
                              <p class="p">If you specify devices or partitions, <span class="keyword cmdname">serviced-storage</span> creates an LVM
                                 volume group with the same name as the thin pool. The following example yields the same
                                 result as the previous, except the name of the volume group is <samp class="ph codeph">docker</samp>
                                 instead of <samp class="ph codeph">zenoss</samp>:
                              </p>
                              
                              <pre class="pre codeblock">serviced-storage create-thin-pool --size=50G docker /dev/sdb /dev/sdc
serviced-storage create-thin-pool --size=50% serviced docker</pre>
                              
                              <p class="p">Create thin pools on separate block devices:</p>
                              
                              <pre class="pre codeblock">serviced-storage create-thin-pool --size=50G docker /dev/sdb
serviced-storage create-thin-pool --size=200G serviced /dev/sdc</pre>
                              
                              <p class="p">Create thin pools on separate partitions:</p>
                              
                              <pre class="pre codeblock">serviced-storage create-thin-pool --size=50% docker /dev/sdb1
serviced-storage create-thin-pool serviced /dev/sdc3</pre>
                              
                              <p class="p">Increase the size of the <span class="keyword cmdname">serviced</span> LVM thin pool, and then increase the
                                 size of a <span class="keyword cmdname">serviced</span> tenant device.
                              </p>
                              
                              <pre class="pre codeblock">lvextend -L+300G zenoss/serviced-pool
serviced-storage -o dm.thinpooldev=/dev/mapper/zenoss-serviced--pool \
  resize -d /opt/serviced/var/volumes 58uuetj38draeu9alp6002b1y 200G</pre>
                              
                              <p class="p">Identify the <span class="keyword cmdname">serviced</span> application data thin pool, and then remove
                                 orphaned snapshot devices.
                              </p>
                              
                              <pre class="pre codeblock">ls /dev/mapper | grep serviced
serviced-storage -o dm.thinpooldev=/dev/mapper/zenoss-serviced--pool \
  check -c /opt/serviced/var/volumes</pre>
                              
                              </div>
                           
                           
                        </div>
                        
                        <div class="related-links"></div>
                     </div>
                     
                     <div class="row">
                        <footer id="topicsNPLinks">
                           <div id="footer_previous"><a href="../../feature/cli/serviced-snapshot.html" class="previous" rel="internal" title="serviced snapshot"><span class="fa fa-arrow-circle-o-left"></span><span class="sr-only">serviced snapshot</span></a></div>
                           <div id="footer_next"><a href="../../feature/vars/file.html" class="next" rel="internal" title="Control Center configuration file"><span class="sr-only">Control Center configuration file</span><span class="fa fa-arrow-circle-o-right"></span></a></div>
                        </footer>
                     </div>
                  </article>
                  <div class="clear"></div>
                  
               </div>
            </div>
         </div>
      </div>
   </body>
</html>