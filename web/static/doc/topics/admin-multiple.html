<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2014">
<meta name="DC.rights.owner" content="(C) Copyright 2014">
<meta name="DC.Type" content="task">
<meta name="prodname" content="Control Center">
<meta name="version" content="0">
<meta name="release" content="8">
<meta name="modification" content="0">
<meta name="DC.Publisher" content="Zenoss, Inc.">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="taskid">
<link rel="stylesheet" type="text/css" href="../commonltr.css">
<title>Deploying multiple instances of a service</title>
</head>
<body id="taskid">


  <h1 class="title topictitle1">Deploying multiple instances of a service</h1>

  <div class="body taskbody">
    <div class="section context"><span class="ph">Control Center</span> can not deploy more than one instance of a service that
      includes virtual host names, such as <span class="ph">Control Center</span>, unless the virtual host
      names are unique. Follow this procedure to modify a service template and deploy multiple
      instances of a service.</div>

    <ol class="ol steps"><li class="li step stepexpand">
        <span class="ph cmd">Log in to the <span class="ph">Control Center</span> master host as a user with
          <span class="keyword cmdname">sudo</span> and <span class="keyword cmdname">docker</span> privileges.</span>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Change directory to the <span class="ph">Control Center</span> templates directory.</span>
        <div class="itemgroup stepxmp"><pre class="pre codeblock">cd /opt/serviced/templates</pre>
</div>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Copy a template file.</span>
        <div class="itemgroup stepxmp"><pre class="pre codeblock">sudo cp zenoss-core-5.0.0_1138.json \
  test-zenoss-core-5.0.0_1138.json</pre>
</div>
        <div class="itemgroup stepxmp"><pre class="pre codeblock">sudo cp zenoss-resmgr-5.0.0_1138.json \
  test-zenoss-resmgr-5.0.0_1138.json</pre>
</div>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Use a text editor to make the following changes to the new service template file:</span>
        <ol type="a" class="ol substeps">
          <li class="li substep substepexpand"><strong>Optional: </strong>
            <span class="ph cmd">Change the value of the <samp class="ph codeph">Name</samp> field on line 3.</span>
            <div class="itemgroup info">This change helps differentiate service templates.</div>
          </li>

          <li class="li substep substepexpand">
            <span class="ph cmd">Change the values of the defined <samp class="ph codeph">VHosts</samp> fields in all
              subservice <samp class="ph codeph">Endpoints</samp> objects.</span>
            <div class="itemgroup info">For example, in the <span class="ph">Control Center</span> service template,
            change the <samp class="ph codeph">zenoss5x</samp>, <samp class="ph codeph">hbase</samp>, and <samp class="ph codeph">opentsdb</samp> virtual host names.</div>
          </li>

        </ol>

      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Use the <span class="keyword cmdname">serviced</span> command-line interface to add the new service template.</span>
        <div class="itemgroup stepxmp"><pre class="pre codeblock">sudo serviced template add \
  test-zenoss-core-5.0.0_1138.json</pre>
</div>
        <div class="itemgroup stepxmp"><pre class="pre codeblock">sudo serviced template add \
  test-zenoss-resmgr-5.0.0_1138.json</pre>
</div>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Log in to the <span class="ph">Control Center</span> web interface, and deploy the new service template.</span>
      </li>
</ol>

  </div>


</body>
</html>