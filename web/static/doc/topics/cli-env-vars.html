<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2014">
<meta name="DC.rights.owner" content="(C) Copyright 2014">
<meta name="DC.Type" content="reference">
<meta name="prodname" content="Control Center">
<meta name="version" content="0">
<meta name="release" content="8">
<meta name="modification" content="0">
<meta name="DC.Publisher" content="Zenoss, Inc.">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="referenceid">
<link rel="stylesheet" type="text/css" href="../commonltr.css">
<title>Configuring Control Center</title>
</head>
<body id="referenceid">


  <h1 class="title topictitle1">Configuring <span class="ph">Control Center</span></h1>

  <div class="body refbody">
    <div class="section">
      <p class="p"><span class="ph">Control Center</span> (<span class="keyword cmdname">serviced</span>) is a single binary that behaves
        differently based on the environment variables defined in its startup script. </p>

        <ul class="ul">
          <li class="li">On Ubuntu systems, the startup script is 
            <span class="ph filepath">/etc/init/serviced.conf</span>.</li>

          <li class="li">On RHEL/CentOS systems the startup script is
            <span class="ph filepath">/etc/systemd/system/multi-user.target.wants/serviced.service</span>.</li>

        </ul>

      <p class="p">The startup script reads the <span class="keyword cmdname">serviced</span> defaults file,
          <span class="ph filepath">/etc/default/serviced</span>. The startup script includes a few environment
        variables, but the values defined in the defaults file take precedence over the values
        defined in the script.</p>

      
      <p class="p">The following list describes the contents of <span class="ph filepath">/etc/default/serviced</span>
        and their effects on the <span class="keyword cmdname">serviced</span> daemon.</p>

      <dl class="dl">
        
          <dt class="dt dlterm"><samp class="ph codeph">HOME</samp></dt>

          <dd class="dd">Default: <span class="ph filepath">/root</span></dd>
 
          <dd class="dd">The path <span class="keyword cmdname">docker</span> uses to locate 
            the <span class="ph filepath">.dockercfg</span> authentication file. 
            Docker Hub credentials are stored in the file.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">GOMAXPROCS</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">2</samp></dd>
 
          <dd class="dd">The maximum number of CPU cores <span class="keyword cmdname">serviced</span> uses.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_AGENT</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">1</samp> (true)</dd>
 
          <dd class="dd">Configures this <span class="keyword cmdname">serviced</span> instance as an agent. Agents run
            application services scheduled for the resource pool to which they belong. The
              <span class="keyword cmdname">serviced</span>  instance configured as the master runs the scheduler. A
              <span class="keyword cmdname">serviced</span> instance may be configured as agent and master, or just
            agent, or just master.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_MASTER</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">1</samp> (true)</dd>
 
          <dd class="dd">Configures this <span class="keyword cmdname">serviced</span> instance as the master. The master runs
            the application services scheduler and other internal services, including the server for
            the <span class="ph">Control Center</span> web interface. A <span class="keyword cmdname">serviced</span> instance
            may be configured as agent and master, or just agent, or just master. Only one
              <span class="keyword cmdname">serviced</span> instance in a cluster may be the master.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_MASTER_POOLID</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">default</samp></dd>
 
          <dd class="dd">The name of the resource pool to which the <span class="keyword cmdname">serviced</span> instance
            configured as master belongs.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_MASTER_IP</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">172.17.42.1</samp></dd>
 
          <dd class="dd">The IP address of the host on which the <span class="keyword cmdname">serviced</span> instance
            configured as master is installed. The default is the IP address Docker typically
            selects for its virtual Ethernet bridge. <div class="note note"><span class="notetitle">Note:</span> This variable is part of the default
              value of several other variables in this file. On Ubuntu systems, the variable is
              replaced with its value automatically. On RHEL/CentOS systems, the variable is not
              replaced, and the IP address must be used instead.</div>
</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_ZK</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">$SERVICED_MASTER_IP:2181</samp></dd>
 
          <dd class="dd">The list of endpoints in <span class="keyword cmdname">serviced</span>'s <a class="xref" href="http://zookeeper.apache.org/" target="_blank">ZooKeeper</a> ensemble, separated by the comma character
              (<samp class="ph codeph">,</samp>). Currently, the <span class="keyword cmdname">serviced</span> instance configured
            as master is the only host in the ZooKeeper ensemble. On RHEL/CentOS systems, replace
              <samp class="ph codeph">$SERVICED_MASTER_IP</samp> with the IP address of the host on which the
              <span class="keyword cmdname">serviced</span> instance configured as master is installed.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_REGISTRY</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">1</samp> (true)</dd>
 
          <dd class="dd">Determines whether <span class="keyword cmdname">serviced</span> uses a local registry to store 
            images.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_DOCKER_REGISTRY</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">$SERVICED_MASTER_IP:5000</samp></dd>
 
          <dd class="dd">The IP address and port number of the <span class="keyword cmdname">serviced</span> registry host. On
            RHEL/CentOS systems, replace <samp class="ph codeph">$SERVICED_MASTER_IP</samp> with the IP address of
            the host on which the <span class="keyword cmdname">serviced</span> instance configured as master is
            installed.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_STATIC_IPS</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">10.0.0.30,10.0.0.31</samp></dd>
 
          <dd class="dd">The list of static IP addresses reserved for 
            <span class="keyword cmdname">serviced</span> to use when it advertises external
            IP addresses on behalf of services it manages, separated by the comma character
            (<samp class="ph codeph">,</samp>).</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_ENDPOINT</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">$SERVICED_MASTER_IP:4979</samp></dd>
 
          <dd class="dd">The IP address and port number of the <span class="keyword cmdname">serviced</span> RPC endpoint on the
            master host. On
            RHEL/CentOS systems, replace <samp class="ph codeph">$SERVICED_MASTER_IP</samp> with the IP address of
            the host on which the <span class="keyword cmdname">serviced</span> instance configured as master is
            installed.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_MAX_RPC_CLIENTS</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">3</samp></dd>
 
          <dd class="dd">The maximum number of clients the <span class="keyword cmdname">serviced</span> RPC endpoint supports.
            The value is used to create a pool of sockets, which are reused as needed. Increasing
            the value increases the number of open sockets, and the use of socket-related operating
            system resources.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_RPC_PORT</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">4979</samp></dd>
 
          <dd class="dd">The port on which <span class="keyword cmdname">serviced</span> listens for RPC requests.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_UI_PORT</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">443</samp></dd>
 
          <dd class="dd">The port on which the master <span class="keyword cmdname">serviced</span> instance
            listens for HTTPS requests. (The web interface port.)</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_MUX_PORT</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">22250</samp></dd>
 
          <dd class="dd">The port <span class="keyword cmdname">serviced</span> uses for multiplexing 
            on its private subnet.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_VARPATH</samp></dt>

          <dd class="dd">Default: <span class="ph filepath">/opt/serviced/var</span></dd>
 
          <dd class="dd">The path of the local directory in which <span class="keyword cmdname">serviced</span> 
            stores its data files, including the distributed file system files.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_KEY_FILE</samp></dt>

          <dd class="dd">Default: <span class="ph filepath">$TMPDIR/zenoss_key.[0-9]+</span></dd>
 
          <dd class="dd">The path of a TLS key file. The default, insecure key file is created when the
            <span class="keyword cmdname">serviced</span> web server first starts, from a public key that is 
            compiled into <span class="keyword cmdname">serviced</span>.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_CERT_FILE</samp></dt>

          <dd class="dd">Default: <span class="ph filepath">$TMPDIR/zenoss_cert.[0-9]+</span></dd>
 
          <dd class="dd">The path of a TLS certificate file. The default, insecure certificate file is created when the
            <span class="keyword cmdname">serviced</span> web server first starts, from a public certificate that is 
            compiled into <span class="keyword cmdname">serviced</span>.</dd>

        
        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_FS_TYPE</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">rsync</samp></dd>
 
          <dd class="dd">The volume type. The supported types are <samp class="ph codeph">rsync</samp> and
              <samp class="ph codeph">btrfs</samp>. <div class="note note"><span class="notetitle">Note:</span> Only <samp class="ph codeph">btrfs</samp> is supported in production
              deployments. The <samp class="ph codeph">rsync</samp> volume type is appropriate only in development
              deployments.</div>
</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_VHOST_ALIASES</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">foobar.com,example.com</samp></dd>
 
          <dd class="dd">The list of virtual host aliases to use in virtual  
            host multiplexing, separated by the comma character
            (<samp class="ph codeph">,</samp>).</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_MAX_CONTAINER_AGE</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">86400</samp> (24 hours)</dd>
 
          <dd class="dd">The number of seconds <span class="keyword cmdname">serviced</span>
            waits before removing a stopped container.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_VIRTUAL_ADDRESS_SUBNET</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">10.3</samp></dd>
 
          <dd class="dd">The 16-bit private subnet to use for <span class="keyword cmdname">serviced</span>'s virtual IPv4 addresses. 
            <div class="note note"><span class="notetitle">Note:</span> This value affects the values of SERVICED_STATIC_IPS.</div>
</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_LOG_LEVEL</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">0</samp></dd>
 
          <dd class="dd">The relative amount of debug information to write to the
              <span class="ph filepath">/var/log/upstart/serviced.log</span> file. The range is 0 (minimum) to 5
            (maximum).</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_LOG_ADDRESS</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">$SERVICED_MASTER_IP:5042</samp></dd>
 
          <dd class="dd">The endpoint to which logs are sent. On RHEL/CentOS systems, replace
              <samp class="ph codeph">$SERVICED_MASTER_IP</samp> with the IP address of the host on which the
              <span class="keyword cmdname">serviced</span> instance configured as master is installed.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_LOGSTASH_ES</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">$SERVICED_MASTER_IP:9100</samp></dd>
 
          <dd class="dd">The endpoint of the <a class="xref" href="http://logstash.net/" target="_blank">logstash</a> service. On
            RHEL/CentOS systems, replace <samp class="ph codeph">$SERVICED_MASTER_IP</samp> with the IP address of
            the host on which the <span class="keyword cmdname">serviced</span> instance configured as master is
            installed.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_LOGSTASH_MAX_DAYS</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">1</samp></dd>
 
          <dd class="dd">The number of days to keep data in the logstash server before purging it.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_STATS_PORT</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">$SERVICED_MASTER_IP:8443</samp></dd>
 
          <dd class="dd">The endpoint of the OpenTSDB reader daemon, for <span class="keyword cmdname">serviced</span>
            statistics. On RHEL/CentOS systems, replace <samp class="ph codeph">$SERVICED_MASTER_IP</samp> with
            the IP address of the host on which the <span class="keyword cmdname">serviced</span> instance configured
            as master is installed.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_STATS_PERIOD</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">10</samp></dd>
 
          <dd class="dd">The number of seconds to wait between polls (health checks) of hosts in resource
            pools.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_DEBUG_PORT</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">6006</samp></dd>
 
          <dd class="dd">The port on which <span class="keyword cmdname">serviced</span> listens for HTTP requests 
            for the <a class="xref" href="http://golang.org/pkg/net/http/pprof/" target="_blank">Go profiler</a>. To stop listening
            for requests, set the value to <samp class="ph codeph">-1</samp>.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_ISVCS_ENV_[0-9]+</samp></dt>

          <dd class="dd">Default: (empty)</dd>
 
          <dd class="dd">
            <p class="p">Arguments to pass to internal services. You may define multiple arguments, each for a
              different internal service. The variables themselves, and their arguments, use the
              following syntax:</p>

            <dl class="dl">
              
                <dt class="dt dlterm"><samp class="ph codeph">SERVICED_ISVCS_ENV_<var class="keyword varname">%d</var></samp></dt>

                <dd class="dd">Each variable name ends with a unique integer in place of
                  <var class="keyword varname">%d</var>.</dd>

              
              
                <dt class="dt dlterm"><samp class="ph codeph"><var class="keyword varname">Service-Name</var>:<var class="keyword varname">Key</var>=<var class="keyword varname">Value</var></samp></dt>

                <dd class="dd">
                  <p class="p">The value of each variable includes the following elements, in order:</p>

                  <ol class="ol">
                    <li class="li"><var class="keyword varname">Service-Name</var>, the internal service name. The
                      following command returns the internal service names that may be
                      used for <var class="keyword varname">Service-Name</var>:
                      <pre class="pre codeblock">sudo docker ps | awk '/isvcs:/{print substr($NF, \
  1, match($NF, /(-[0-9a-f]*){5}/) - 1 )}'</pre>
</li>

                    <li class="li">The colon character (<samp class="ph codeph">:</samp>).</li>

                    <li class="li"><var class="keyword varname">Key</var>, a variable to pass to the internal service.</li>

                    <li class="li">The equals sign character (<samp class="ph codeph">=</samp>).</li>

                    <li class="li"><var class="keyword varname">Value</var>, the definition of the variable to pass to the internal service.</li>

                  </ol>

                </dd>

              
            </dl>

            <p class="p">The following, example variable passes <samp class="ph codeph">ES_JAVA_OPTS=-Xmx4g</samp> to 
            the Elasticsearch internal service.</p>

            <pre class="pre codeblock">SERVICED_ISVCS_ENV_0=elasticsearch-logstash:ES_JAVA_OPTS=-Xmx4g</pre>

          </dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_ADMIN_GROUP</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">sudo</samp> (Ubuntu) <samp class="ph codeph">wheel</samp> (RHEL/CentOS)</dd>
 
          <dd class="dd">The name of the Linux group on the <span class="ph">Control Center</span> master host whose
            members are authorized to use the <span class="ph">Control Center</span> web interface. You may
            replace the default group with a group that does not have superuser privileges.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_ALLOW_ROOT_LOGIN</samp></dt>

          <dd class="dd">Default: <samp class="ph codeph">1</samp> (true)</dd>
 
          <dd class="dd">Determines whether <samp class="ph codeph">root</samp>, or members of the <samp class="ph codeph">sudo</samp> or
              <samp class="ph codeph">wheel</samp> groups, may log in to the <span class="ph">Control Center</span> web
            interface.</dd>

        
        
          <dt class="dt dlterm"><samp class="ph codeph">SERVICED_OPTS</samp></dt>

          <dd class="dd">Default: (empty)</dd>
 
          <dd class="dd">Arbitrary options for the <span class="keyword cmdname">serviced</span> startup command.</dd>

        
      </dl>

    </div>

  </div>


</body>
</html>